<div class="checkout-container">
  <!-- Header Section -->
  <div class="header">
    <div class="back-button" (click)="goBack()">
      <ion-icon name="arrow-back-outline"></ion-icon>
    </div>
    <h1>Checkout</h1>
  </div>

  <!-- Contact Information Section -->
  <div class="section contact-info">
    <h2>Contact Information</h2>
    <form>
      <div class="input-row">
        <ion-item class="rounded-input half-width">
          <ion-input [(ngModel)]="checkoutInfo.user_info.fname" name="first" placeholder="First Name"></ion-input>
        </ion-item>
        <ion-item class="rounded-input half-width">
          <ion-input [(ngModel)]="checkoutInfo.user_info.lname" name="last" placeholder="Last Name"></ion-input>
        </ion-item>
      </div>
      <ion-item class="rounded-input">
        <ion-input [(ngModel)]="checkoutInfo.user_info.email" name="email" type="email" placeholder="Email"></ion-input>
      </ion-item>
      <ion-item class="rounded-input">
        <ion-input [(ngModel)]="checkoutInfo.user_info.phone" name="phone" type="tel" placeholder="Phone"></ion-input>
      </ion-item>
    </form>
  </div>

  <!-- Order Type Section -->
<div class="section order-type">
  <h2>Order Type</h2>
  <ion-radio-group>
    <ion-item lines="none" class="radio-item">
      <ion-radio slot="start" value="pickup" checked></ion-radio>
      <ion-label>Pickup</ion-label>
    </ion-item>
    <!-- <ion-item lines="none" class="radio-item">
      <ion-radio slot="start" value="delivery"></ion-radio>
      <ion-label>Delivery</ion-label>
    </ion-item> -->
  </ion-radio-group>

  <!-- Date and Time Inputs Side by Side -->
  <div class="date-time-container">
    <div class="date-picker-container enhanced-box">
      <ion-item lines="none" class="date-picker" (click)="toggleTooltip()">
        <ion-label>{{ selectedDate || 'Select Date' }}</ion-label>
      </ion-item>
      <div class="tooltip-calendar" *ngIf="showTooltip">
        <ion-datetime (ionChange)="onDateSelected($event)" presentation="date"></ion-datetime>
      </div>
    </div>
    <div class="time-picker-container enhanced-box">
      <ion-item lines="none" class="time-picker">
        <ion-select placeholder="Select Time" [(ngModel)]="selectedTime">
          <ion-select-option value="09:00">09:00 AM</ion-select-option>
          <ion-select-option value="10:00">10:00 AM</ion-select-option>
          <ion-select-option value="11:00">11:00 AM</ion-select-option>
          <ion-select-option value="12:00">12:00 PM</ion-select-option>
          <ion-select-option value="13:00">01:00 PM</ion-select-option>
        </ion-select>
      </ion-item>
    </div>
    
  </div>
</div>


<!-- Payment Section -->
<div class="section payment-method">
  <h2>Payment Method</h2>
  <ion-radio-group>
    <ion-item lines="none" class="radio-item">
      <ion-radio slot="start" value="cash"></ion-radio>
      <ion-label>Cash</ion-label>
    </ion-item>
    <ion-item lines="none" class="radio-item">
      <ion-radio slot="start" value="card"></ion-radio>
      <ion-label>Debit/Credit Card</ion-label>
    </ion-item>
  </ion-radio-group>
  <div class="aeropay-container enhanced-box">
    <p>Or use:</p>
    <div id="aeropay-button-container"></div>
  </div>
</div>


  <!-- Order Summary -->
  <div class="section order-summary">
    <h2>Order Summary</h2>
    <div class="summary">
      <p>Subtotal: <span>{{ finalSubtotal | currency }}</span></p>
  
      <!-- Available Points and Redeem Option -->
      <p>Available Points: <span>{{ checkoutInfo.user_info.points }}</span></p>
      <p>Potential Savings: <span>{{ checkoutInfo.user_info.points * pointValue | currency }}</span></p>
  
      <!-- Points Slider -->
      <p>Points to Redeem: <span>{{ pointsToRedeem }}</span></p>
      <ion-item lines="none" class="points-slider">
        <ion-range
          [(ngModel)]="pointsToRedeem"
          [min]="0"
          [max]="checkoutInfo.user_info.points"
          [step]="1"
          (ionChange)="updateTotals()"
        >
          <ion-label slot="start">0</ion-label>
          <ion-label slot="end">{{ checkoutInfo.user_info.points }}</ion-label>
        </ion-range>
      </ion-item>
      <p>Discount Applied: <span>{{ pointsToRedeem * pointValue | currency }}</span></p>
  
      <p>Tax: <span>{{ finalTax | currency }}</span></p>
      <p>Total: <span>{{ finalTotal | currency }}</span></p>
    </div>
  </div>
  
   <!-- Cart Items Display -->
  <div class="section cart-items">
    <h2>Your Items</h2>
    <ul>
      <li *ngFor="let item of checkoutInfo.cart" class="order-item">
        <img [src]="item.image" alt="{{ item.title }}" class="item-image" />
        <div class="item-details">
          <span class="item-quantity">{{ item.quantity }}x</span>
          <span class="item-title">{{ item.title }}</span>
        </div>
      </li>
    </ul>
  </div>

  
</div>

<ion-button expand="block" class="sticky-footer" (click)="placeOrder()">
  <div class="footer-content">
    <span>Place Order</span>
  </div>
</ion-button>
